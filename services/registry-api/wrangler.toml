# Cloudflare Workers configuration for registry.deepractice.dev
name = "resourcex-registry-api"
main = "src/index.ts"
compatibility_date = "2024-12-01"

# Custom domain (configure in Cloudflare Dashboard after deployment)
# routes = [{ pattern = "registry.deepractice.dev/*", zone_name = "deepractice.dev" }]

# D1 Database for manifest and index
[[d1_databases]]
binding = "DB"
database_name = "resourcex-registry"
database_id = "d72f2042-e507-4e1b-afb7-7f766f74998c"
migrations_dir = "drizzle"

# R2 Bucket for archive storage
[[r2_buckets]]
binding = "BUCKET"
bucket_name = "resourcex-registry-archives"

# Environment variables
[vars]
ENVIRONMENT = "production"
